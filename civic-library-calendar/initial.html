<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library Events Calendar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        neutral: {
                            50: '#fafafa',
                            100: '#f5f5f5',
                            200: '#e5e5e5',
                            300: '#d4d4d4',
                            400: '#a3a3a3',
                            500: '#737373',
                            600: '#525252',
                            700: '#404040',
                            800: '#262626',
                            900: '#171717',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-neutral-50 min-h-screen">
    <div x-data="calendarApp()" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Header -->
        <header class="mb-8">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-3xl font-bold text-neutral-900">Library Events Calendar</h1>
                    <p class="text-neutral-600 mt-2">Discover upcoming programs and activities</p>
                </div>
                <div class="flex items-center space-x-4">
                    <button @click="previousMonth" class="p-2 rounded-lg border border-neutral-300 hover:bg-neutral-100 transition-colors">
                        <svg class="w-5 h-5 text-neutral-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                        </svg>
                    </button>
                    <h2 class="text-xl font-semibold text-neutral-800 min-w-48 text-center" x-text="`${monthNames[currentMonth]} ${currentYear}`"></h2>
                    <button @click="nextMonth" class="p-2 rounded-lg border border-neutral-300 hover:bg-neutral-100 transition-colors">
                        <svg class="w-5 h-5 text-neutral-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Calendar Grid -->
        <div class="bg-white rounded-xl shadow-sm border border-neutral-200 overflow-hidden">
            <!-- Weekday Headers -->
            <div class="grid grid-cols-7 bg-indigo-50 border-b border-indigo-100">
                <template x-for="day in ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']" :key="day">
                    <div class="p-4 text-center font-medium text-indigo-900" x-text="day"></div>
                </template>
            </div>

            <!-- Calendar Days -->
            <div class="grid grid-cols-7">
                <template x-for="(week, weekIndex) in calendar" :key="weekIndex">
                    <template x-for="(day, dayIndex) in week" :key="dayIndex">
                        <div class="min-h-32 border-r border-b border-neutral-200 last:border-r-0">
                            <div class="p-2 border-b border-neutral-100">
                                <span class="text-sm font-medium text-neutral-700" x-text="day.date"></span>
                            </div>
                            <div class="p-2 space-y-2">
                                <template x-for="event in day.events" :key="event.id">
                                    <div class="text-xs p-2 rounded-lg cursor-pointer transition-all hover:shadow-sm"
                                         :class="{
                                             'bg-blue-100 text-blue-800 border border-blue-200': event.type === 'workshop',
                                             'bg-purple-100 text-purple-800 border border-purple-200': event.type === 'storytime',
                                             'bg-indigo-100 text-indigo-800 border border-indigo-200': event.type === 'lecture',
                                             'bg-neutral-100 text-neutral-800 border border-neutral-200': event.type === 'other'
                                         }"
                                         @click="selectedEvent = event">
                                        <div class="font-medium" x-text="event.title"></div>
                                        <div class="text-opacity-70" x-text="event.time"></div>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </template>
                </template>
            </div>
        </div>

        <!-- Event Categories Legend -->
        <div class="mt-6 flex flex-wrap gap-4 justify-center">
            <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                <span class="text-sm text-neutral-600">Workshops</span>
            </div>
            <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-purple-500 rounded-full"></div>
                <span class="text-sm text-neutral-600">Story Time</span>
            </div>
            <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-indigo-500 rounded-full"></div>
                <span class="text-sm text-neutral-600">Lectures</span>
            </div>
            <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-neutral-500 rounded-full"></div>
                <span class="text-sm text-neutral-600">Other Events</span>
            </div>
        </div>

        <!-- Event Modal -->
        <div x-show="selectedEvent" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" x-cloak>
            <div class="bg-white rounded-xl shadow-xl max-w-md w-full p-6" @click.outside="selectedEvent = null">
                <template x-if="selectedEvent">
                    <div>
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-xl font-bold text-neutral-900" x-text="selectedEvent.title"></h3>
                            <button @click="selectedEvent = null" class="text-neutral-400 hover:text-neutral-600 transition-colors">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="flex items-center space-x-2">
                                <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                <span class="text-neutral-700" x-text="selectedEvent.date"></span>
                            </div>
                            
                            <div class="flex items-center space-x-2">
                                <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <span class="text-neutral-700" x-text="selectedEvent.time"></span>
                            </div>
                            
                            <div class="flex items-center space-x-2">
                                <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                <span class="text-neutral-700" x-text="selectedEvent.location"></span>
                            </div>
                        </div>
                        
                        <div class="mt-4 pt-4 border-t border-neutral-200">
                            <p class="text-neutral-600" x-text="selectedEvent.description"></p>
                        </div>
                        
                        <div class="mt-6 flex justify-end">
                            <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium">
                                Register for Event
                            </button>
                        </div>
                    </div>
                </template>
            </div>
        </div>
    </div>

    <script>
        function calendarApp() {
            return {
                currentMonth: new Date().getMonth(),
                currentYear: new Date().getFullYear(),
                selectedEvent: null,
                monthNames: [
                    'January', 'February', 'March', 'April', 'May', 'June',
                    'July', 'August', 'September', 'October', 'November', 'December'
                ],
                
                get calendar() {
                    const firstDay = new Date(this.currentYear, this.currentMonth, 1);
                    const lastDay = new Date(this.currentYear, this.currentMonth + 1, 0);
                    const startDate = new Date(firstDay);
                    startDate.setDate(startDate.getDate() - firstDay.getDay());
                    
                    const calendar = [];
                    let currentWeek = [];
                    
                    for (let i = 0; i < 42; i++) {
                        const date = new Date(startDate);
                        date.setDate(startDate.getDate() + i);
                        
                        const dayEvents = this.events.filter(event => 
                            event.date === date.toISOString().split('T')[0]
                        );
                        
                        currentWeek.push({
                            date: date.getDate(),
                            fullDate: date,
                            events: dayEvents,
                            isCurrentMonth: date.getMonth() === this.currentMonth
                        });
                        
                        if (currentWeek.length === 7) {
                            calendar.push(currentWeek);
                            currentWeek = [];
                        }
                    }
                    
                    return calendar;
                },
                
                events: [
                    {
                        id: 1,
                        title: "Children's Story Time",
                        type: "storytime",
                        date: new Date(new Date().getFullYear(), new Date().getMonth(), 5).toISOString().split('T')[0],
                        time: "10:00 AM - 11:00 AM",
                        location: "Children's Section",
                        description: "Join us for a magical story time session with our librarian. Perfect for children ages 3-6."
                    },
                    {
                        id: 2,
                        title: "Digital Literacy Workshop",
                        type: "workshop",
                        date: new Date(new Date().getFullYear(), new Date().getMonth(), 8).toISOString().split('T')[0],
                        time: "2:00 PM - 4:00 PM",
                        location: "Computer Lab",
                        description: "Learn essential computer skills including email, internet browsing, and online safety."
                    },
                    {
                        id: 3,
                        title: "Local History Lecture",
                        type: "lecture",
                        date: new Date(new Date().getFullYear(), new Date().getMonth(), 12).toISOString().split('T')[0],
                        time: "6:30 PM - 8:00 PM",
                        location: "Community Room",
                        description: "Professor Johnson presents on the rich history of our local community from settlement to present day."
                    },
                    {
                        id: 4,
                        title: "Book Club Meeting",
                        type: "other",
                        date: new Date(new Date().getFullYear(), new Date().getMonth(), 15).toISOString().split('T')[0],
                        time: "7:00 PM - 8:30 PM",
                        location: "Reading Nook",
                        description: "Monthly book club discussion. This month's selection: 'The Midnight Library' by Matt Haig."
                    },
                    {
                        id: 5,
                        title: "Teen Coding Workshop",
                        type: "workshop",
                        date: new Date(new Date().getFullYear(), new Date().getMonth(), 18).toISOString().split('T')[0],
                        time: "3:00 PM - 5:00 PM",
                        location: "Teen Space",
                        description: "Introduction to Python programming for teens. No prior experience required."
                    }
                ],
                
                previousMonth() {
                    if (this.currentMonth === 0) {
                        this.currentMonth = 11;
                        this.currentYear--;
                    } else {
                        this.currentMonth--;
                    }
                },
                
                nextMonth() {
                    if (this.currentMonth === 11) {
                        this.currentMonth = 0;
                        this.currentYear++;
                    } else {
                        this.currentMonth++;
                    }
                }
            }
        }
    </script>

    <style>
        [x-cloak] { display: none !important; }
    </style>
</body>
</html>